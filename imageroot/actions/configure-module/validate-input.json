{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Configure NethVoice",
    "$id": "http://nethserver.org/json-schema/task/input/nethvoice/configure",
    "description": "Configure NethVoice",
    "examples": [
        {
            "nethvoice_host": "voice.ns8.local",
            "nethcti_ui_host": "cti.ns8.local",
            "user_domain": "domain.ns8.local",
            "reports_international_prefix": "+39"
        },
        {
            "nethvoice_host": "voice.ns8.local",
            "nethcti_ui_host": "cti.ns8.local",
            "user_domain": "domain.ns8.local",
            "reports_international_prefix": "0039"
        }
    ],
    "type": "object",
    "required": [
        "nethvoice_host",
        "nethcti_ui_host",
        "reports_international_prefix"
    ],
    "properties": {
        "nethvoice_host": {
            "description": "Host where NethVoice instance should be exposed to",
            "type": "string",
            "format": "hostname",
            "pattern": "\\.",
            "not": {
                "format": "ipv4"
            }
        },
        "nethcti_ui_host": {
            "description": "CTI host, must be different than nethvoice_host",
            "type": "string",
            "format": "hostname",
            "pattern": "\\.",
            "not": {
                "format": "ipv4"
            }
        },
        "lets_encrypt": {
            "description": "Enable Let's Encrypt certificate",
            "type": "boolean"
        },
        "user_domain": {
            "description": "Domain where the user accessing NethVoice are stored",
            "type": "string"
        },
        "app_brand_id": {
            "description": "Mobile app brand ID used for push proxy",
            "type": "string"
        },
        "reports_international_prefix": {
            "description": "International prefix for the reports.",
            "type": "string",
            "pattern": "^(00\\d{1,4}|\\+\\d{1,4})$"
        },
        "timezone": {
            "description": "Asterisk Timezone for timeconditions",
            "type": "string"
        },
        "nethvoice_adm_username": {
            "description": "NethVoice username for account provider",
            "type": "string"
        },
        "nethvoice_adm_password": {
            "description": "NethVoice password for account provider",
            "type": "string"
        },
        "nethvoice_hotel": {
            "description": "NethVoice hotel module enabled",
            "type": "string"
        },
        "nethvoice_hotel_fias_address": {
            "description": "FIAS server address",
            "type": "string",
            "anyOf": [
                {
                    "format": "hostname",
                    "pattern": "\\."
                },
                {
                    "format": "ipv4"
                },
                {
                    "pattern": "^$"
                }
            ]
        },
        "nethvoice_hotel_fias_port": {
            "description": "FIAS server port",
            "anyOf": [
                {
                    "type": "string",
                    "pattern": "^[0-9]+$"
                },
                {
                    "type": "string",
                    "pattern": "^$"
                }
            ]
        },
        "satellite_call_transcription_enabled": {
            "description": "Enable real-time call transcription",
            "type": "string",
            "enum": [
                "True",
                "False"
            ]
        },
        "satellite_voicemail_transcription_enabled": {
            "description": "Enable voicemail transcription",
            "type": "string",
            "enum": [
                "True",
                "False"
            ]
        },
        "deepgram_api_key": {
            "description": "Deepgram API key for real-time call and voicemail transcription",
            "type": "string",
            "anyOf": [
                {
                    "pattern": "^[a-zA-Z0-9]+$"
                },
                {
                    "pattern": "^$"
                }
            ]
        },
        "openai_api_key": {
            "description": "OpenAI API key for call and voicemail summarization",
            "type": "string",
            "anyOf": [
                {
                    "pattern": "^[a-zA-Z0-9\\-_]+$"
                },
                {
                    "pattern": "^$"
                }
            ]
        }
    }
}
