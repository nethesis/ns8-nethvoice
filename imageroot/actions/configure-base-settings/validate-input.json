{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Configure NethVoice Base Settings",
    "$id": "http://nethserver.org/json-schema/task/input/nethvoice/configure-base-settings",
    "description": "Configure core NethVoice settings (hostnames, domain, timezone, reports)",
    "examples": [
        {
            "nethvoice_host": "voice.ns8.local",
            "nethcti_ui_host": "cti.ns8.local",
            "user_domain": "domain.ns8.local",
            "timezone": "Europe/Rome",
            "reports_international_prefix": "+39",
            "lets_encrypt": true
        }
    ],
    "type": "object",
    "required": [
        "nethvoice_host",
        "nethcti_ui_host",
        "user_domain",
        "timezone",
        "reports_international_prefix"
    ],
    "properties": {
        "nethvoice_host": {
            "description": "Host where NethVoice instance should be exposed to",
            "type": "string",
            "format": "hostname",
            "not": {
                "format": "ipv4"
            }
        },
        "nethcti_ui_host": {
            "description": "CTI host, must be different than nethvoice_host",
            "type": "string",
            "format": "hostname",
            "not": {
                "format": "ipv4"
            }
        },
        "user_domain": {
            "description": "Domain where the users accessing NethVoice are stored",
            "type": "string"
        },
        "timezone": {
            "description": "Asterisk timezone for time conditions",
            "type": "string"
        },
        "reports_international_prefix": {
            "description": "International prefix for the reports",
            "type": "string",
            "pattern": "^(00\\d{1,4}|\\+\\d{1,4})$"
        },
        "lets_encrypt": {
            "description": "Enable Let's Encrypt certificate",
            "type": "boolean",
            "default": true
        },
        "nethvoice_host_local_networks": {
            "description": "Local networks where NethVoice instance should be exposed to",
            "type": "array",
            "minItems": 1,
            "items": {
                "type": "object",
                "required": [
                    "network",
                    "netmask",
                    "gateway"
                ],
                "properties": {
                    "network": {
                        "description": "Network address",
                        "type": "string",
                        "format": "ipv4"
                    },
                    "netmask": {
                        "description": "Network mask",
                        "type": "string",
                        "format": "ipv4"
                    },
                    "gateway": {
                        "description": "Network gateway",
                        "type": "string",
                        "format": "ipv4"
                    }
                }
            }
        },
        "nethcti_prefix": {
            "description": "NethCTI prefix",
            "type": "string"
        },
        "nethcti_autoc2c": {
            "description": "Enable click to call",
            "enum": [
                "enabled",
                "disabled"
            ],
            "default": "enabled"
        },
        "nethcti_trunks_events": {
            "description": "Enable or disable trunks events",
            "enum": [
                "enabled",
                "disabled"
            ],
            "default": "disabled"
        },
        "nethcti_alerts": {
            "description": "Enable or disable queue alerts",
            "type": "boolean",
            "default": false
        },
        "nethcti_authentication_enabled": {
            "description": "Enable or disable authentication",
            "type": "boolean",
            "default": true
        },
        "nethcti_unauthe_call": {
            "description": "Enable or disable unauthenticated call",
            "enum": [
                "enabled",
                "disabled"
            ],
            "default": "disabled"
        },
        "nethcti_unauthe_call_ip": {
            "description": "IP address for unauthenticated calls",
            "type": "string",
            "format": "ipv4"
        },
        "nethcti_jabber_url": {
            "description": "Jabber chat URL",
            "type": "string",
            "format": "uri"
        },
        "nethcti_jabber_domain": {
            "description": "Jabber chat domain",
            "type": "string",
            "format": "hostname"
        },
        "nethcti_cdr_script": {
            "description": "Path of the script to execute on outgoing call end",
            "type": "string"
        },
        "nethcti_cdr_script_timeout": {
            "description": "Timeout of the script to execute on outgoing call end (in milliseconds)",
            "type": "integer"
        },
        "nethcti_cdr_script_call_in": {
            "description": "Path of the script to execute on incoming call",
            "type": "string"
        },
        "nethcti_log_level": {
            "description": "Log level of nethcti-server",
            "type": "string",
            "enum": [
                "info",
                "warn"
            ],
            "default": "warn"
        },
        "nethcti_privacy_numbers": {
            "description": "Privacy number replace strings",
            "type": "string",
            "default": "xxx"
        },
        "conference_jitsi_url": {
            "description": "Jitsi conference URL",
            "type": "string",
            "format": "uri",
            "default": "https://jitsi.nethserver.net"
        },
        "nethcti_ui_product_name": {
            "description": "NethCTI UI product name for branding",
            "type": "string",
            "default": "NethVoice CTI"
        },
        "nethcti_ui_company_name": {
            "description": "NethCTI UI company name for branding",
            "type": "string",
            "default": "Nethesis"
        },
        "nethcti_ui_company_url": {
            "description": "NethCTI UI company url for branding",
            "type": "string",
            "format": "uri",
            "default": "https://www.nethesis.it/"
        },
        "app_brand_id": {
            "description": "Mobile app brand ID used for push proxy",
            "type": "string"
        },
        "reports_ui_app_name": {
            "description": "Name of the reports UI app",
            "type": "string"
        },
        "reports_ui_help_url": {
            "description": "Help URL of the reports UI app",
            "type": "string"
        },
        "reports_ui_company_name": {
            "description": "Company name of the reports UI app",
            "type": "string"
        },
        "reports_ui_company_url": {
            "description": "Company URL of the reports UI app",
            "type": "string"
        },
        "nethvoice_adm_username": {
            "description": "NethVoice username for account provider",
            "type": "string"
        },
        "nethvoice_adm_password": {
            "description": "NethVoice password for account provider",
            "type": "string"
        }
    }
}
